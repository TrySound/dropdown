/*!
 * dropdown 0.2.0 https://github.com/TrySound/dropdown
 * Copyright 2015 Bogdan Chadkin <trysound@yandex.ru>
 */
!function(){function t(t,n){for(var o=t;o;){if(o===n)return!0;o=o.parentNode}return!1}function n(t){var n=this;n.stack=[],n.opts=t,document.addEventListener("click",function(t){n.toggle(t.target)})}var o="dropdown",e="nextElementSibling",s="classLinkActive",c="classListActive",i=[],l={open:[],close:[]},r={init:function(t){t=t||{},t.link=t.link||"."+o+"-link",t[s]=t[s]||o+"-active",t[c]=t[c]||t[s],i.push(new n(t))},close:function(){var t,n;for(n=i.length-1;~n;n-=1)if(t=i[n],t.stack.length)return t.close(),!0;return!1},on:function(t,n){"open"!==t&&"close"!==t||"function"!=typeof n||l[t].push(n)}};"object"==typeof exports?module.exports=r:window[o]=r,n.prototype={toggle:function(n){var o,c=this,i=c.stack,l=c.opts,r=n.closest(l.link);for(o=i.length-1;~o&&(!t(n,i[o][e])&&r!==i[o]);o-=1)c.close();r&&(r.matches("."+l[s])?c.close():c.open(r))},open:function(t){var n,o=this,i=t[e],r=o.opts,a=l.open;if(i&&(!r.list||i.matches(r.list))){for(n=0;n<a.length;n++)a[n](t,i);o.stack.push(t),t.classList.add(r[s]),i.classList.add(r[c])}},close:function(){var t,n=this,o=n.stack.pop(),i=o[e],r=n.opts,a=l.close;for(t=0;t<a.length;t++)a[t](o,i);o.classList.remove(r[s]),i.classList.remove(r[c])}}}();