/*!
 * dropdown 0.3.0 https://github.com/TrySound/dropdown
 * Copyright 2015 Bogdan Chadkin <trysound@yandex.ru>
 */
!function(){function t(t,e){for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}function e(e){var n=this,c=n.stack=[];n.opts=e,document.addEventListener("click",function(i){var l,r=i.target,a=r.closest(e.link);for(l=c.length-1;~l&&(!t(r,c[l][o])&&a!==c[l]);l-=1)n.close();a&&(i.preventDefault(),a.matches("."+e[s])?n.close():n.open(a))})}var n="dropdown",o="nextElementSibling",s="classLinkActive",c="classListActive",i=[],l={open:[],close:[]},r={init:function(t){t=t||{},t.link=t.link||"."+n+"-link",t[s]=t[s]||n+"-active",t[c]=t[c]||t[s],i.push(new e(t))},close:function(){var t,e;for(e=i.length-1;~e;e-=1)if(t=i[e],t.stack.length)return t.close(),!0;return!1},on:function(t,e){"open"!==t&&"close"!==t||"function"!=typeof e||l[t].push(e)}};"object"==typeof exports?module.exports=r:window[n]=r,e.prototype={open:function(t){var e,n=this,i=t[o],r=n.opts,a=l.open;if(i&&(!r.list||i.matches(r.list))){for(e=0;e<a.length;e++)a[e](t,i,r);n.stack.push(t),t.classList.add(r[s]),i.classList.add(r[c])}},close:function(){var t,e=this,n=e.stack.pop(),i=n[o],r=e.opts,a=l.close;for(t=0;t<a.length;t++)a[t](n,i,r);n.classList.remove(r[s]),i.classList.remove(r[c])}}}();