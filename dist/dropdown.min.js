/*!
 * dropdown 0.0.1
 * https://github.com/TrySound/dropdown
 * Copyright 2015 Bogdan Chadkin <trysound@yandex.ru>
 */
!function(){function t(t,s){for(var e=t;e;){if(e===s)return!0;e=e.parentNode}return!1}function s(t){var s=this;s.stack=[],s.opts=t,document.addEventListener("click",function(t){s.toggle(t.target)})}var e="dropdown",n="nextElementSibling",o="classLinkActive",i="classListActive",c=[],l={init:function(t){t=t||{},t.link=t.link||"."+e+"-link",t[o]=t[o]||e+"-active",t[i]=t[i]||t[o],c.push(new s(t))},close:function(){var t,s;for(s=c.length-1;~s;s-=1)if(t=c[s],t.stack.length)return t.close(),!0;return!1}};"object"==typeof exports?module.exports=l:window[e]=l,s.prototype={toggle:function(s){var e,i=this,c=i.stack,l=i.opts,r=s.closest(l.link);for(e=c.length-1;~e&&(!t(s,c[e][n])&&r!==c[e]);e-=1)i.close();r&&(r.matches("."+l[o])?i.close():i.open(r))},open:function(t){var s=this,e=t[n],c=s.opts;!e||c.list&&!e.matches(c.list)||(s.stack.push(t),t.classList.add(c[o]),e.classList.add(c[i]))},close:function(t){var s=this,t=s.stack.pop(),e=t[n],c=s.opts;t.classList.remove(c[o]),e.classList.remove(c[i])}}}();